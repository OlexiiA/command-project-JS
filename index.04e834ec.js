!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);var i=r("dIxxU"),s=r("1VFfL"),o=r("f2Ar2");i=r("dIxxU");async function c(e,t){const n=`?api_key=2913964819360854cc0ff757d62600b5&query=${e}&language=en-US&page=${t}&include_adult=false`;return await i.default.get(`https://api.themoviedb.org/3/search/movie${n}`).then((e=>e.data))}const l="api_key=2913964819360854cc0ff757d62600b5",d={currentPage:1,keyWord:"",paginationBox:document.querySelector(".tui-pagination")};async function u(e,t,n,a){try{return await i.default.get(`https://api.themoviedb.org/3/trending/${t}/${n}?${e}&page=${a}`)}catch(e){console.error(e)}}function p(){window.scrollTo({
//! плавный скрол вверх
top:0,left:0,behavior:"smooth"})}u(l,"movie","week",d.currentPage).then((e=>{(0,o.addMarkup)(e.data.results),f.reset(e.data.total_results)}));document.querySelector(".film-card");const g=document.getElementById("pagination"),m={totalItems:20,itemsPerPage:20,visiblePages:3,page:d.currentPage,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}},f=new(e(s))(g,m);f.on("beforeMove",(e=>{d.currentPage=e.page,u(l,"movie","week",d.currentPage).then((e=>{(0,o.addMarkup)(e.data.results)})).then(p())}));const _=new(e(s))(g,m),h={28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"},y=document.querySelector("form#search-form"),v=document.querySelector(".film-card");let w="";y.addEventListener("submit",(async function(e){if(e.preventDefault(),d.currentPage=1,w=e.currentTarget.searchQuery.value.trim(),""===w)return;const t=await c(w,d.currentPage);try{t.total_results>0?(b(t.results),_.reset(t.total_results),_.on("beforeMove",(e=>{d.currentPage=e.page;c(w,d.currentPage).then((e=>{b(e.results)})).then(p())}))):v.innerHTML='<li>\n            <img class="allert-box" src="https://i.postimg.cc/BnKVk1zL/sorry.jpg"></img>\n            </li>'}catch(e){console.log(e)}y.reset()}));function b(e){const t=e.map((({poster_path:e,release_date:t,title:n,genre_ids:a,id:r})=>{let i=`https://image.tmdb.org/t/p/w780${e}`;null===e&&(i="https://upload.wikimedia.org/wikipedia/commons/2/26/512pxIcon-sunset_photo_not_found.png");let s=t.slice(0,4),o=[];//! Перевод ID жанра в текст
return a.forEach((e=>{o.push(h[e])})),`<li class="card gallery__item" id="${r}" >\n    <a href="#" class="card__link">\n        <div class="card__wrapper-img">\n        <img class="card__img" src="${i}">\n        </div>\n        <div class="card__wrapper">\n        <h3 class="card__title">${n}</h3>\n        <p class="card__info">${o.map((e=>e)).join(", ")} | <span class="card__info-genre">${s}</span></p>\n        </div>\n    </a>\n  </li>`})).join("");v.innerHTML="",v.insertAdjacentHTML("beforeend",t)}const $=new(e(s))(g,m),k=document.querySelector(".genres-btn"),P=document.querySelector(".genre-filter");let M=[];async function x(e,t){return await i.default.get(`https://api.themoviedb.org/3/discover/movie?api_key=2913964819360854cc0ff757d62600b5&with_genres=${e}&page=${t}`)}k.addEventListener("click",(async function(e){
//! Рендер разметки по нажатию на кнопку
e.preventDefault(),d.currentPage=1;let t=M.map((e=>e)).join(",");x(t,d.currentPage).then((e=>L(e.data.results))),$.on("beforeMove",(e=>{d.currentPage=e.page,x(t,d.currentPage).then((e=>{L(e.data.results)})).then(p())}))})),P.addEventListener("change",(function(e){
//! Добавляет в список жанры, если уже есть то удаляет
M.includes(e.target.id)?M.splice(M.indexOf("event.target.id",1)):M.push(e.target.id)}));const T=document.querySelector(".film-card");function L(e){const t=e.map((({title:e,release_date:t,poster_path:n,genre_ids:a,id:r})=>{let i=t.slice(0,4);null===n&&(//! Проверка на пустую картинку
poster="https://upload.wikimedia.org/wikipedia/commons/2/26/512pxIcon-sunset_photo_not_found.png");let s=[];//! Перевод ID жанра в текст
a.forEach((e=>{s.push(h[e])}));let o=`https://image.tmdb.org/t/p/w780${n}`;return null==n&&(o="https://upload.wikimedia.org/wikipedia/commons/2/26/512pxIcon-sunset_photo_not_found.png"),`<li class="card gallery__item rotateY" id="${r}">\n      <a href="#" class="card__link">\n        <div class="card__wrapper-img">\n        <img class="card__img" src=${o} alt="movie's poster">\n        </div>\n        <div class="card__wrapper">\n        <h3 class="card__title">${e}</h3>\n        <p class="card__info">${s.map((e=>e)).join(", ")} | <span class="card__info-genre">${i}</span></p>\n        </div>\n      </a>\n    </li>`})).join("");T.innerHTML="",T.innerHTML=t}}();
//# sourceMappingURL=index.04e834ec.js.map
